---
// src/pages/turismo/[slug].astro
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar.astro';

export async function getStaticPaths() {
  const entries = await getCollection('turismo');
  return entries.map(entry => ({
    // .replace(/\.md$/, '') garante que o 'slug' não tenha o .md no final
    params: { slug: entry.id.replace(/\.md$/, '') }, 
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={`${entry.data.nome} | emguapi.com`}>
    <Navbar />
    
    <main class="max-w-4xl mx-auto my-12 bg-white rounded-[3rem] shadow-2xl overflow-hidden">
        <div class="h-[500px] relative">
            <img src={entry.data.imagem} class="w-full h-full object-cover" alt={entry.data.nome} />
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
            <div class="absolute bottom-12 left-12">
                <span class="bg-red-base text-white text-[10px] font-black px-4 py-1.5 rounded-full uppercase mb-4 inline-block tracking-widest">
                    {entry.data.categoria}
                </span>
                <h1 class="text-6xl font-black text-white uppercase italic tracking-tighter">
                    {entry.data.nome}
                </h1>
            </div>
        </div>

        <div class="p-12 grid md:grid-cols-3 gap-12">
            <aside class="space-y-6">
                <div class="bg-ice p-6 rounded-2xl border-l-4 border-red-base">
                    <span class="text-[10px] font-black text-gray-400 uppercase block mb-1">Dificuldade</span>
                    <p class="font-bold text-navy-dark uppercase italic">{entry.data.dificuldade || "Acesso Livre"}</p>
                </div>
                <div class="bg-ice p-6 rounded-2xl border-l-4 border-navy-base">
                    <span class="text-[10px] font-black text-gray-400 uppercase block mb-1">Localização</span>
                    <p class="font-bold text-navy-dark text-sm">{entry.data.localizacao}</p>
                </div>
            </aside>

            <div class="md:col-span-2 prose prose-lg max-w-none text-gray-700 leading-relaxed italic">
                <Content />
            </div>
        </div>
    </main>
</Layout>