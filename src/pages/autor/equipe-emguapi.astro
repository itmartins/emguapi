---
// src/pages/autor/equipe-emguapi.astro
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar.astro';
import NoticiaCard from '../../components/NoticiaCard.astro';

// Busca todas as notícias, ordena da mais recente para a mais antiga e pega as 3 primeiras
const ultimasNoticias = (await getCollection('noticias'))
  .sort((a, b) => new Date(b.data.data).getTime() - new Date(a.data.data).getTime())
  .slice(0, 3);
---

<Layout title="Equipe emguapi.com - Autores">
  <Navbar />
  
  <main class="max-w-5xl mx-auto px-6 py-12 md:py-20">
    
    <div class="flex flex-col md:flex-row items-center md:items-start gap-8 border-b border-gray-200 pb-12">
      
      <div class="w-32 h-32 md:w-40 md:h-40 bg-navy-dark rounded-full flex items-center justify-center shrink-0 shadow-lg border-4 border-gray-50 z-10">
        <span class="text-4xl md:text-5xl font-black text-white tracking-tighter">
          <span class="font-light">em</span><span class="text-red-base">G</span>
        </span>
      </div>

      <div class="text-center md:text-left flex-1">
        <div class="inline-block bg-red-base text-white text-[10px] font-black uppercase tracking-widest px-3 py-1.5 rounded-sm mb-4 shadow-sm">
          Redação Oficial
        </div>
        
        <h1 class="text-4xl md:text-5xl font-black uppercase tracking-tighter text-navy-dark mb-4">
          Equipe <span class="text-red-base">emguapi.com</span>
        </h1>
        
        <p class="text-gray-600 leading-relaxed text-base md:text-lg mb-8 max-w-2xl mx-auto md:mx-0 font-medium">
          Somos o núcleo de jornalismo do portal, dedicado a cobrir o dia a dia de Guapimirim e da Baixada Fluminense. Nosso foco é a utilidade pública, a fiscalização e a defesa dos interesses da população, desde o transporte até a cultura local.
        </p>
        
        <div class="flex flex-wrap gap-4 justify-center md:justify-start">
            <a href="mailto:redacao@emguapi.com" class="bg-gray-100 border border-gray-200 text-navy-dark hover:border-navy-base px-6 py-3 rounded-md text-xs font-black uppercase tracking-widest transition-colors flex items-center gap-2">
              ✉️ Enviar Pauta
            </a>
            <a href="/" class="bg-navy-base text-white hover:bg-navy-dark px-6 py-3 rounded-md text-xs font-black uppercase tracking-widest transition-colors flex items-center gap-2 shadow-sm">
              ←  Voltar à Capa
            </a>
        </div>
      </div>
    </div>

    <div class="mt-16">
      <h2 class="text-2xl font-black text-navy-dark uppercase tracking-tighter mb-10 flex items-center gap-3 border-b border-gray-100 pb-4">
        <span class="w-2 h-6 bg-red-base inline-block rounded-sm"></span>
        Últimas reportagens
      </h2>
      
      {/* GRID AUTOMÁTICA Puxando os cards do seu componente */}
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {ultimasNoticias.map(noticia => (
            <div class="h-full"> 
                <NoticiaCard 
                    categoria={noticia.data.categoria}
                    titulo={noticia.data.titulo}
                    resumo=""
                    data={noticia.data.data}
                    link={`/noticias/${noticia.id.replace(/\.md$/, '')}`}
                    imagem={noticia.data.imagem || "/fotos/estacao-guapi.jpg"}
                />
            </div>
        ))}
      </div>
    </div>

  </main>
</Layout>