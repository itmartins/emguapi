---
// src/pages/noticias/[slug].astro
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/Navbar.astro';

export async function getStaticPaths() {
  const noticias = await getCollection('noticias');
  return noticias.map(entry => ({
    // O segredo está aqui: usamos entry.id para bater com o nome do arquivo .md
    params: { slug: entry.id }, 
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={`${entry.data.titulo} | emguapi.com`}>
    <Navbar />
    <article class="max-w-3xl mx-auto p-8 my-12 bg-white shadow-2xl rounded-[2.5rem] border border-borderLight">
        <header class="mb-10 border-b border-ice pb-10">
            <div class="flex items-center gap-4 mb-6">
                <span class="bg-red-base text-white text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest">
                    {entry.data.categoria}
                </span>
                <span class="text-navy-soft text-xs font-bold uppercase tracking-[0.2em]">
                    {entry.data.data}
                </span>
            </div>
            <h1 class="text-4xl md:text-5xl font-black text-navy-dark leading-tight mb-6 italic tracking-tighter uppercase">
                {entry.data.titulo}
            </h1>
            <p class="text-xl text-navy-soft italic leading-relaxed border-l-4 border-red-base pl-6">
                {entry.data.resumo}
            </p>
        </header>

        <div class="prose prose-lg max-w-none text-navy-dark/90 leading-loose prose-headings:text-navy-dark prose-headings:italic prose-strong:text-red-base">
            <Content />
        </div>
        
        <footer class="mt-16 pt-8 border-t border-ice">
             <a href="/" class="text-navy-dark font-black uppercase text-xs hover:text-red-base transition-colors tracking-widest">
                ← Voltar para a Início
            </a>
        </footer>
    </article>
</Layout>